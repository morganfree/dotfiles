---
- name: gh
  hosts: local
  tasks:
    - name: install and configure gh
      include_role:
        name: configurable_dependency
      vars:
        dep_name: gh
        files: []
        cmd: gh --version
    - name: install gh commands
      shell: |
        gh alias set --shell {{ item | basename | splitext | first }} '{{ item }}'
      loop: '{{ lookup("fileglob", "{{ playbook_dir }}/commands/*", wantlist=True) }}'
